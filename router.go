// Code generated by hertz generator.

package main

import (
	"DY_BAT/controller"
	"github.com/cloudwego/hertz/pkg/app/server"
)

// customizeRegister registers customize routers.
func customizedRegister(r *server.Hertz) {
	//r.GET("/ping", handler.Ping)

	// your code ...
	r.Static("/static", "./public")

	//利用hertz-jwt 进行jWT认证 参考：https://www.cnblogs.com/YLTFY1998/p/16898513.html
	//auth := r.Group("", mw.JwtMiddleware.MiddlewareFunc())
	//auth.GET("/refresh_token", mw.JwtMiddleware.RefreshHandler)
	//auth.GET("/ping", handler.Ping)
	//
	//auth.POST("/douyin/publish/action/", controller.Publish)

	douyin := r.Group("/douyin")
	{
		// 视频feed流
		r.GET("/feed", handler.Feed)
		// 用户
		userGroup := douyin.Group("/user")
		{
			userGroup.POST("/login", handler.UserLogin)
			userGroup.POST("/register", handler.UserRegister)
			userGroup.GET("/:id", handler.GetUser)
		}
		//	视频投稿和发布
		publishGroup := douyin.Group("/publish")
		{
			publishGroup.POST("/action", handler.Publish)  // 视频发布
			publishGroup.GET("/list", handler.PublishList) // 发布列表
		}
	}

}
